(this["webpackJsonppink-virus-puzzle"]=this["webpackJsonppink-virus-puzzle"]||[]).push([[0],{14:function(e,t,a){},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a(1),i=a.n(c),l=a(7),u=a.n(l),s=(a(14),a(5)),f=a(8);function o(e){return Array(e).fill(0).map((function(e,t){return t}))}!function(e){e[e.BLANK=0]="BLANK",e[e.BRICK=1]="BRICK",e[e.BLOCK=2]="BLOCK",e[e.LADDER=3]="LADDER",e[e.ROPE=4]="ROPE",e[e.EXIT=5]="EXIT",e[e.JEWEL=6]="JEWEL",e[e.CHARA=7]="CHARA"}(n||(n={}));var d;function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;console.assert(e.length===a*t);var n=o(t).map((function(t){return o(a).map((function(n){return parseInt(e[t*a+n])}))}));return{field:n,width:a,height:t}}function b(e,t){return{x:e.x+[1,0,-1,0][t],y:e.y+[0,1,0,-1][t]}}function v(e,t){return e.value[t.y][t.x]}function O(e,t,a){e.value[t.y][t.x]=a}function j(e,t){return 0<=t.x&&t.x<e.width&&0<=t.y&&t.y<e.height}function E(e,t){return j(e,t)&&![n.BRICK,n.BLOCK].includes(v(e,t))}function g(e,t){var a=b(t,d.DOWN);return![n.LADDER,n.ROPE,n.EXIT].includes(v(e,t))&&E(e,a)&&![n.LADDER].includes(v(e,a))}function R(e){return o(e.height).flatMap((function(t){return o(e.width).map((function(a){var n={x:a,y:t};return{point:n,tile:v(e,n)}}))}))}!function(e){e[e.RIGHT=0]="RIGHT",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.UP=3]="UP"}(d||(d={}));function x(e){return JSON.parse(JSON.stringify(e))}function p(e){var t=e.field,a=e.chara,r=e.exit;v(t,a)===n.JEWEL&&O(t,a,n.BLANK),v(t,a)===n.EXIT&&(e.beated=!0),0===R(t).filter((function(e){return e.tile===n.JEWEL})).length&&O(t,r,n.EXIT)}function L(e){var t=e.width,a=e.height,r=e.field.map((function(e){return Object(f.a)(e)})),c={x:0,y:0},i={x:0,y:0};return o(a).forEach((function(e){o(t).forEach((function(t){switch(r[e][t]){case n.CHARA:r[e][t]=n.BLANK,c={x:t,y:e};break;case n.EXIT:r[e][t]=n.BRICK,i={x:t,y:e}}}))})),{level:e,field:{value:r,width:t,height:a},chara:c,exit:i,queue:[],beated:!1}}function A(e,t){if(t===d.UP&&v(e.field,e.chara)!==n.LADDER)return e;var a=b(e.chara,t);if(!E(e.field,a))return e;var r=x(e);for(r.chara=a,p(r);g(r.field,r.chara);)r.chara=b(r.chara,d.DOWN),p(r);return r}function D(e,t){var a,r,c=b(b(e.chara,d.DOWN),t);if(!j(a=e.field,r=c)||v(a,r)!==n.BRICK||!E(a,b(r,d.UP)))return e;var i=x(e);if(O(i.field,c,n.BLANK),i.queue.push(c),i.queue.length>5){var l=i.queue.shift();O(i.field,l,n.BRICK)}return i}a(15);var y,I=a(2),w=40,C=40,K=(y={},Object(I.a)(y,n.BLANK,""),Object(I.a)(y,n.BRICK,"DarkRed"),Object(I.a)(y,n.BLOCK,"DarkCyan"),Object(I.a)(y,n.LADDER,"GreenYellow"),Object(I.a)(y,n.ROPE,"Khaki"),Object(I.a)(y,n.EXIT,"Red"),Object(I.a)(y,n.JEWEL,"Cyan"),Object(I.a)(y,n.CHARA,""),y);function m(e){var t=Object(c.useRef)(null);return Object(c.useEffect)((function(){var a=t.current;if(a){a.focus();var r=a.getContext("2d");r.clearRect(0,0,e.width,e.height),R(e.field).filter((function(e){return e.tile!==n.BLANK})).forEach((function(e){var t=e.point,a=e.tile;!function(e,t,a){var n=t.x,r=t.y;e.fillStyle=a,e.fillRect(w*n,C*r,w,C),e.strokeRect(w*n,C*r,w,C)}(r,t,K[a])})),function(e,t){var a=t.x,n=t.y,r=w*(a+.2),c=C*(n+.2);e.fillStyle="pink",e.fillRect(r,c,24,24),e.strokeRect(r,c,24,24)}(r,e.chara)}}),[e]),Object(r.jsx)("canvas",{ref:t,width:e.width,height:e.height,tabIndex:e.tabIndex,onKeyDown:e.onKeyDown})}var B=[{label:"sample",data:"000000000000000007000000000003500000000003100000000003100000000003100000000003130000000000130000000003130000000003100000000003130000000006130000"},{label:"classic-beginner1",data:"044444400000006000030000000000030700011110031111010610030000011210034000000000000300004000000300000600000300000100000310001110000310051111000316"},{label:"classic-beginner2",data:"000000000000000000000007111112111111111116111111111111111111000000600000000000000000111113122222111113111111006003144444444443100006000000000005"},{label:"classic-beginner3",data:"064444000070030003003030034403043030000003003000000603403000000006003000000003003400004403406000000003003000000003003400000043043000500000000000"},{label:"classic-beginner4",data:"000000000000444400000000300000070000300212121212300060000060340000000000003111111111003111111111003111161111003000100001613000000001503003100001"},{label:"classic-intermediate1",data:"000000000000000000700000000061111111311111111111321221211116304440611113110001111113010001110003001011112222000100161111000100044445000100000001"},{label:"classic-intermediate2",data:"000007000000101111111035131060111031131111122031131211000031131163132031131111131031131131136031131111161031136113111031111161301031000000110030"},{label:"classic-intermediate3",data:"000007000000000022200000000000000000000000000000004444404030613000016230013000002030013000000030013000000030613002613030122222222222000000000005"},{label:"classic-advanced1",data:"000000000700000002311111311131131111311131111111311131111111311131000611311601132212311000032200351220100202300001613262311111203202300000003000"},{label:"classic-advanced2",data:"000000000000000444420000073232620000212230000000060032121300220500000230001300000030444060606030600000000030000022222030000000000316222222222222"},{label:"classic-advanced3",data:"000000000000031111153000031110710300031111110300030060600300030000000300030606060300030000000300030000000300030000000300031220222213061000000013"},{label:"classic-german1",data:"040440007000101001111231101111111231161161100031101111060231101111111231101111111231101111111231101116111231000000000030101111111131111111100035"},{label:"classic-german2",data:"000000000000444374430000600321030000444316100310000011000316444444311110600000311110012222211111100000000005110000000311111000003111222222222222"},{label:"classic-german3",data:"000000004440000000003000000000003000000000003000304040403000310101010060301616100000344404047000300010101000300000000000300000400000300000016105"},{label:"classic-german4",data:"000000000000000000000000000000000000000000007000322222202222300000000005301111111111301111111111301212121212300000000000300262626262310000000000"}],k=B[0].label,T=B[0].data,N=h(T);var P=function(){var e=Object(c.useState)(L(N)),t=Object(s.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(k),l=Object(s.a)(i,2),u=l[0],f=l[1],o=Object(c.useState)(T),b=Object(s.a)(o,2),v=b[0],O=b[1];function j(e){var t=L(h(e));n(t)}return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(m,{tabIndex:0,onKeyDown:function(e){switch(e.key){case"ArrowDown":n(A(a,d.DOWN));break;case"ArrowLeft":n(A(a,d.LEFT));break;case"ArrowRight":n(A(a,d.RIGHT));break;case"ArrowUp":n(A(a,d.UP));break;case"z":n(D(a,d.LEFT));break;case"x":n(D(a,d.RIGHT));break;case"r":n(L(a.level))}},field:a.field,chara:a.chara,width:480,height:480}),Object(r.jsxs)("form",{onSubmit:function(e){j(v),e.preventDefault()},children:[Object(r.jsx)("div",{children:Object(r.jsx)("textarea",{value:v,onChange:function(e){O(e.target.value)},rows:5,cols:60})}),Object(r.jsx)("select",{value:u,onChange:function(e){var t=e.currentTarget.value;O(t),f(t),j(t)},children:B.map((function(e){var t=e.label,a=e.data;return Object(r.jsx)("option",{value:a,children:t},t)}))}),Object(r.jsx)("input",{type:"submit",value:"Refresh"})]})]})},W=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,17)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),r(e),c(e),i(e)}))};u.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(P,{})}),document.getElementById("root")),W()}},[[16,1,2]]]);
//# sourceMappingURL=main.38754863.chunk.js.map