(this["webpackJsonppink-virus-puzzle"]=this["webpackJsonppink-virus-puzzle"]||[]).push([[0],{66:function(e,a,t){},67:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n,r=t(10),i=t(0),c=t(7),l=t.n(c),u=(t(66),t(43)),s=t(50);function f(e){return Array(e).fill(0).map((function(e,a){return a}))}!function(e){e[e.BLANK=0]="BLANK",e[e.BRICK=1]="BRICK",e[e.BLOCK=2]="BLOCK",e[e.LADDER=3]="LADDER",e[e.ROPE=4]="ROPE",e[e.EXIT=5]="EXIT",e[e.JEWEL=6]="JEWEL",e[e.CHARA=7]="CHARA"}(n||(n={}));var o;function d(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;console.assert(e.length===t*a);var n=f(a).map((function(a){return f(t).map((function(n){return parseInt(e[a*t+n])}))}));return{field:n,width:t,height:a}}function h(e,a){return{x:e.x+[1,0,-1,0][a],y:e.y+[0,1,0,-1][a]}}function b(e,a){return e.value[a.y][a.x]}function v(e,a,t){e.value[a.y][a.x]=t}function O(e,a){return 0<=a.x&&a.x<e.width&&0<=a.y&&a.y<e.height}function j(e,a){return O(e,a)&&![n.BRICK,n.BLOCK].includes(b(e,a))}function E(e,a){var t=h(a,o.DOWN);return![n.LADDER,n.ROPE,n.EXIT].includes(b(e,a))&&j(e,t)&&![n.LADDER].includes(b(e,t))}function g(e){return f(e.height).flatMap((function(a){return f(e.width).map((function(t){var n={x:t,y:a};return{point:n,tile:b(e,n)}}))}))}!function(e){e[e.RIGHT=0]="RIGHT",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.UP=3]="UP"}(o||(o={}));function R(e){return JSON.parse(JSON.stringify(e))}function x(e){var a=e.field,t=e.chara,r=e.exit;b(a,t)===n.JEWEL&&v(a,t,n.BLANK),b(a,t)===n.EXIT&&(e.beated=!0),0===g(a).filter((function(e){return e.tile===n.JEWEL})).length&&v(a,r,n.EXIT)}function L(e){var a=e.width,t=e.height,r=e.field.map((function(e){return Object(s.a)(e)})),i={x:0,y:0},c={x:0,y:0};return f(t).forEach((function(e){f(a).forEach((function(a){switch(r[e][a]){case n.CHARA:r[e][a]=n.BLANK,i={x:a,y:e};break;case n.EXIT:r[e][a]=n.BRICK,c={x:a,y:e}}}))})),{level:e,field:{value:r,width:a,height:t},chara:i,exit:c,queue:[],beated:!1}}function A(e,a){if(a===o.UP&&b(e.field,e.chara)!==n.LADDER)return e;var t=h(e.chara,a);if(!j(e.field,t))return e;var r=R(e);for(r.chara=t,x(r);E(r.field,r.chara);)r.chara=h(r.chara,o.DOWN),x(r);return r}function p(e,a){var t,r,i=h(h(e.chara,o.DOWN),a);if(!O(t=e.field,r=i)||b(t,r)!==n.BRICK||!j(t,h(r,o.UP)))return e;var c=R(e);if(v(c.field,i,n.BLANK),c.queue.push(i),c.queue.length>5){var l=c.queue.shift();v(c.field,l,n.BRICK)}return c}t(67);var y,w=t(17),D=40,C=40,I=(y={},Object(w.a)(y,n.BLANK,""),Object(w.a)(y,n.BRICK,"DarkRed"),Object(w.a)(y,n.BLOCK,"DarkCyan"),Object(w.a)(y,n.LADDER,"GreenYellow"),Object(w.a)(y,n.ROPE,"Khaki"),Object(w.a)(y,n.EXIT,"Red"),Object(w.a)(y,n.JEWEL,"Cyan"),Object(w.a)(y,n.CHARA,""),y);function K(e){var a=Object(i.useRef)(null);return Object(i.useEffect)((function(){var t=a.current;if(t){t.focus();var r=t.getContext("2d");r.clearRect(0,0,e.width,e.height),g(e.field).filter((function(e){return e.tile!==n.BLANK})).forEach((function(e){var a=e.point,t=e.tile;!function(e,a,t){var n=a.x,r=a.y;e.fillStyle=t,e.fillRect(D*n,C*r,D,C),e.strokeRect(D*n,C*r,D,C)}(r,a,I[t])})),function(e,a){var t=a.x,n=a.y,r=D*(t+.2),i=C*(n+.2);e.fillStyle="pink",e.fillRect(r,i,24,24),e.strokeRect(r,i,24,24)}(r,e.chara)}}),[e]),Object(r.jsx)("canvas",{ref:a,width:e.width,height:e.height,tabIndex:e.tabIndex,onKeyDown:e.onKeyDown})}var B=[{label:"sample",data:"000000000000000007000000000003500000000003100000000003100000000003100000000003130000000000130000000003130000000003100000000003130000000006130000"},{label:"classic-beginner1",data:"044444400000006000030000000000030700011110031111010610030000011210034000000000000300004000000300000600000300000100000310001110000310051111000316"},{label:"classic-beginner2",data:"000000000000000000000007111112111111111116111111111111111111000000600000000000000000111113122222111113111111006003144444444443100006000000000005"},{label:"classic-beginner3",data:"064444000070030003003030034403043030000003003000000603403000000006003000000003003400004403406000000003003000000003003400000043043000500000000000"},{label:"classic-beginner4",data:"000000000000444400000000300000070000300212121212300060000060340000000000003111111111003111111111003111161111003000100001613000000001503003100001"},{label:"classic-intermediate1",data:"000000000000000000700000000061111111311111111111321221211116304440611113110001111113010001110003001011112222000100161111000100044445000100000001"},{label:"classic-intermediate2",data:"000007000000101111111035131060111031131111122031131211000031131163132031131111131031131131136031131111161031136113111031111161301031000000110030"},{label:"classic-intermediate3",data:"000007000000000022200000000000000000000000000000004444404030613000016230013000002030013000000030013000000030613002613030122222222222000000000005"},{label:"classic-advanced1",data:"000000000700000002311111311131131111311131111111311131111111311131000611311601132212311000032200351220100202300001613262311111203202300000003000"},{label:"classic-advanced2",data:"000000000000000444420000073232620000212230000000060032121300220500000230001300000030444060606030600000000030000022222030000000000316222222222222"},{label:"classic-advanced3",data:"000000000000031111153000031110710300031111110300030060600300030000000300030606060300030000000300030000000300030000000300031220222213061000000013"},{label:"classic-german1",data:"040440007000101001111231101111111231161161100031101111060231101111111231101111111231101111111231101116111231000000000030101111111131111111100035"},{label:"classic-german2",data:"000000000000444374430000600321030000444316100310000011000316444444311110600000311110012222211111100000000005110000000311111000003111222222222222"},{label:"classic-german3",data:"000000004440000000003000000000003000000000003000304040403000310101010060301616100000344404047000300010101000300000000000300000400000300000016105"},{label:"classic-german4",data:"000000000000000000000000000000000000000000007000322222202222300000000005301111111111301111111111301212121212300000000000300262626262310000000000"}],k=t(106),m=t(107),T=t(104),N=t(109),P=t(103),W=B[0].data;var J=function(){var e=Object(i.useState)(W),a=Object(u.a)(e,2),t=a[0],n=a[1],c=Object(i.useState)(W),l=Object(u.a)(c,2),s=l[0],f=l[1],h=Object(i.useState)(L(d(W))),b=Object(u.a)(h,2),v=b[0],O=b[1];function j(e){var a=L(d(e));O(a)}return Object(r.jsxs)(k.a,{className:"App",children:[Object(r.jsx)(K,{tabIndex:0,onKeyDown:function(e){switch(e.key){case"ArrowDown":O(A(v,o.DOWN));break;case"ArrowLeft":O(A(v,o.LEFT));break;case"ArrowRight":O(A(v,o.RIGHT));break;case"ArrowUp":O(A(v,o.UP));break;case"z":O(p(v,o.LEFT));break;case"x":O(p(v,o.RIGHT));break;case"r":O(L(v.level))}},field:v.field,chara:v.chara,width:480,height:480}),Object(r.jsx)(m.a,{value:s,rows:3,onChange:function(e){f(e.target.value)},multiline:!0,variant:"outlined",style:{width:480}}),Object(r.jsx)(k.a,{children:Object(r.jsx)(T.a,{variant:"outlined",value:t,onChange:function(e){var a=e.target.value;f(a),n(a),j(a)},style:{width:320},children:B.map((function(e){var a=e.label,t=e.data;return Object(r.jsx)(N.a,{value:t,children:a},a)}))})}),Object(r.jsx)(k.a,{children:Object(r.jsx)(P.a,{onClick:function(){j(s)},variant:"contained",children:"Refresh"})})]})},F=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,111)).then((function(a){var t=a.getCLS,n=a.getFID,r=a.getFCP,i=a.getLCP,c=a.getTTFB;t(e),n(e),r(e),i(e),c(e)}))};l.a.render(Object(r.jsx)(J,{}),document.getElementById("root")),F()}},[[71,1,2]]]);
//# sourceMappingURL=main.456a6ad3.chunk.js.map