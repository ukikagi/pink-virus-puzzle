(this["webpackJsonppink-virus-puzzle"]=this["webpackJsonppink-virus-puzzle"]||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n,c,i,r=a(0),l=a(1),u=a.n(l),s=a(9),o=a.n(s),b=(a(15),a(7)),f=a(4),d=a(3),h=a(2);function O(e){return Array(e).fill(0).map((function(e,t){return t}))}function j(e){return e.map((function(e){return Object(b.a)(e)}))}function v(e,t,a){return console.assert(e.length===a*t),{field:O(t).map((function(t){return O(a).map((function(n){return parseInt(e[t*a+n])}))})),width:a,height:t}}function g(e){var t=e.width,a=e.height,c=j(e.field),i={x:0,y:0},r={x:0,y:0};return O(a).forEach((function(e){O(t).forEach((function(t){switch(c[e][t]){case n.CHARA:c[e][t]=n.BLANK,i={x:t,y:e};break;case n.EXIT:c[e][t]=n.BRICK,r={x:t,y:e}}}))})),{field:{value:c,width:t,height:a},chara:i,exit:r}}function E(e,t){return{x:e.x+[1,0,-1,0][t],y:e.y+[0,1,0,-1][t]}}function R(e,t){return e.value[t.y][t.x]}function x(e,t,a){e.value[t.y][t.x]=a}function p(e,t){return 0<=t.x&&t.x<e.width&&0<=t.y&&t.y<e.height}function L(e,t){return p(e,t)&&![n.BRICK,n.BLOCK].includes(R(e,t))}function A(e,t){var a=E(t,c.DOWN);return![n.LADDER,n.ROPE,n.EXIT].includes(R(e,t))&&L(e,a)&&![n.LADDER].includes(R(e,a))}function D(e){return O(e.height).flatMap((function(t){return O(e.width).map((function(a){var n={x:a,y:t};return{point:n,tile:R(e,n)}}))}))}!function(e){e[e.BLANK=0]="BLANK",e[e.BRICK=1]="BRICK",e[e.BLOCK=2]="BLOCK",e[e.LADDER=3]="LADDER",e[e.ROPE=4]="ROPE",e[e.EXIT=5]="EXIT",e[e.JEWEL=6]="JEWEL",e[e.CHARA=7]="CHARA"}(n||(n={})),function(e){e[e.RIGHT=0]="RIGHT",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.UP=3]="UP"}(c||(c={}));var w=40,C=40,y=(i={},Object(h.a)(i,n.BLANK,""),Object(h.a)(i,n.BRICK,"DarkRed"),Object(h.a)(i,n.BLOCK,"DarkCyan"),Object(h.a)(i,n.LADDER,"GreenYellow"),Object(h.a)(i,n.ROPE,"Khaki"),Object(h.a)(i,n.EXIT,"Red"),Object(h.a)(i,n.JEWEL,"Cyan"),Object(h.a)(i,n.CHARA,""),i);function I(e){var t=Object(l.useRef)(null);return Object(l.useEffect)((function(){if(t.current){var a=t.current.getContext("2d");a.clearRect(0,0,e.width,e.height),D(e.field).filter((function(e){return e.tile!==n.BLANK})).forEach((function(e){var t=e.point,n=e.tile;!function(e,t,a){var n=t.x,c=t.y;e.fillStyle=a,e.fillRect(w*n,C*c,w,C),e.strokeRect(w*n,C*c,w,C)}(a,t,y[n])})),function(e,t){var a=t.x,n=t.y,c=w*(a+.2),i=C*(n+.2);e.fillStyle="pink",e.fillRect(c,i,24,24),e.strokeRect(c,i,24,24)}(a,e.chara)}}),[e]),Object(r.jsx)("canvas",{ref:t,width:e.width,height:e.height})}var m=[{label:"sample",data:"000000000000000007000000000003500000000003100000000003100000000003100000000003130000000000130000000003130000000003100000000003130000000006130000"},{label:"classic-beginner1",data:"044444400000006000030000000000030700011110031111010610030000011210034000000000000300004000000300000600000300000100000310001110000310051111000316"},{label:"classic-beginner2",data:"000000000000000000000007111112111111111116111111111111111111000000600000000000000000111113122222111113111111006003144444444443100006000000000005"},{label:"classic-beginner3",data:"064444000070030003003030034403043030000003003000000603403000000006003000000003003400004403406000000003003000000003003400000043043000500000000000"},{label:"classic-beginner4",data:"000000000000444400000000300000070000300212121212300060000060340000000000003111111111003111111111003111161111003000100001613000000001503003100001"},{label:"classic-intermediate1",data:"000000000000000000700000000061111111311111111111321221211116304440611113110001111113010001110003001011112222000100161111000100044445000100000001"},{label:"classic-intermediate2",data:"000007000000101111111035131060111031131111122031131211000031131163132031131111131031131131136031131111161031136113111031111161301031000000110030"},{label:"classic-intermediate3",data:"000007000000000022200000000000000000000000000000004444404030613000016230013000002030013000000030013000000030613002613030122222222222000000000005"},{label:"classic-advanced1",data:"000000000700000002311111311131131111311131111111311131111111311131000611311601132212311000032200351220100202300001613262311111203202300000003000"},{label:"classic-advanced2",data:"000000000000000444420000073232620000212230000000060032121300220500000230001300000030444060606030600000000030000022222030000000000316222222222222"},{label:"classic-advanced3",data:"000000000000031111153000031110710300031111110300030060600300030000000300030606060300030000000300030000000300030000000300031220222213061000000013"},{label:"classic-german1",data:"040440007000101001111231101111111231161161100031101111060231101111111231101111111231101111111231101116111231000000000030101111111131111111100035"},{label:"classic-german2",data:"000000000000444374430000600321030000444316100310000011000316444444311110600000311110012222211111100000000005110000000311111000003111222222222222"},{label:"classic-german3",data:"000000004440000000003000000000003000000000003000304040403000310101010060301616100000344404047000300010101000300000000000300000400000300000016105"},{label:"classic-german4",data:"000000000000000000000000000000000000000000007000322222202222300000000005301111111111301111111111301212121212300000000000300262626262310000000000"}];function B(e){var t=m[0].label,a=m[0].data,i=v(a,12,12),u=g(i),s=Object(l.useState)(u.field),o=Object(d.a)(s,2),h=o[0],O=o[1],w=Object(l.useState)(u.chara),C=Object(d.a)(w,2),y=C[0],B=C[1],K=Object(l.useState)([]),T=Object(d.a)(K,2),k=T[0],N=T[1],S=Object(l.useState)(u.exit),P=Object(d.a)(S,2),W=P[0],F=P[1],H=Object(l.useState)(!1),J=Object(d.a)(H,2),X=(J[0],J[1]),U=Object(l.useState)(t),z=Object(d.a)(U,2),G=z[0],M=z[1],Y=Object(l.useState)(i),q=Object(d.a)(Y,2),Q=q[0],V=q[1],Z=Object(l.useState)(a),$=Object(d.a)(Z,2),_=$[0],ee=$[1];function te(e){V(e);var t=g(e),a=t.field,n=t.chara,c=t.exit;O(a),B(n),N([]),F(c),X(!1)}function ae(e,t,a){R(e,t)===n.JEWEL&&x(e,t,n.BLANK),R(e,t)===n.EXIT&&X(!0),0===function(e){return D(e).filter((function(e){return e.tile===n.JEWEL})).length}(e)&&x(e,a,n.EXIT)}function ne(e){if(e!==c.UP||R(h,y)===n.LADDER){var t=E(y,e);if(L(h,t)){var a=Object(f.a)({},t),i=Object(f.a)(Object(f.a)({},h),{},{value:j(h.value)});for(ae(i,a,W);A(i,a);)ae(i,a=E(a,c.DOWN),W);B(a),O(i)}}}function ce(e){var t=E(E(y,c.DOWN),e);if(function(e,t){return p(e,t)&&R(e,t)===n.BRICK&&L(e,E(t,c.UP))}(h,t)){var a=Object(f.a)(Object(f.a)({},h),{},{value:j(h.value)}),i=Object(b.a)(k);if(x(a,t,n.BLANK),i.push(t),i.length>5)x(a,i.shift(),n.BRICK);O(a),N(i)}}return Object(r.jsxs)("div",{tabIndex:0,onKeyDown:function(e){switch(e.key){case"ArrowDown":ne(c.DOWN);break;case"ArrowLeft":ne(c.LEFT);break;case"ArrowRight":ne(c.RIGHT);break;case"ArrowUp":ne(c.UP);break;case"z":ce(c.LEFT);break;case"x":ce(c.RIGHT);break;case"r":te(Q)}},children:[Object(r.jsx)(I,{field:h,chara:y,width:e.width,height:e.height}),Object(r.jsxs)("form",{onSubmit:function(e){te(v(_,12,12)),e.preventDefault()},children:[Object(r.jsx)("div",{children:Object(r.jsx)("textarea",{value:_,onChange:function(e){ee(e.target.value)},rows:5,cols:60})}),Object(r.jsx)("select",{value:G,onChange:function(e){var t=v(e.currentTarget.value,12,12);ee(e.currentTarget.value),M(e.currentTarget.value),te(t)},children:m.map((function(e){var t=e.label,a=e.data;return Object(r.jsx)("option",{value:a,children:t},t)}))}),Object(r.jsx)("input",{type:"submit",value:"Refresh"})]})]})}a(16);var K=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(B,{width:480,height:480})})},T=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};o.a.render(Object(r.jsx)(u.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root")),T()}},[[17,1,2]]]);
//# sourceMappingURL=main.862f65df.chunk.js.map